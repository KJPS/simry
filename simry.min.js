"use strict";var gameState=true;var renderer;var stage;var events={};var KEY_DOWN=83;var KEY_UP=87;var KEY_RIGHT=68;var KEY_LEFT=65;var KEY_ARROW_DOWN=40;var KEY_ARROW_UP=38;var KEY_ARROW_RIGHT=39;var KEY_ARROW_LEFT=37;var KEY_SPACEBAR=32;var KEY_ENTER=13;var COLOR_RED=16711680;var COLOR_BLUE=4286945;var COLOR_GREEN=2263842;var COLOR_PINK=16716947;var COLOR_YELLOW=16766720;var COLOR_WHITE=16777215;var COLOR_BLACK=0;var COLOR_GRAY=7833753;var COLOR_ORANGE=16729344;var COLOR_PURPLE=8388736;var COLOR_BROWN=9127187;var COLOR_TEAL=32896;function init(width,height,options){width=width?width:800;height=height?height:600;renderer=new PIXI.WebGLRenderer(width,height,options);document.body.appendChild(renderer.view);stage=new PIXI.Container}function animate(tick){var fn=function(){requestAnimationFrame(fn);gameState&&tick();stage.children.sort(function(a,b){a.zindex=a.zindex||0;b.zindex=b.zindex||0;return a.zindex-b.zindex});renderer.render(stage)};fn()}function background(color){renderer.background=color}function point(x,y,color){var point=new PIXI.Graphics;point.lineStyle(1,color);point.moveTo(x,y);point.lineTo(x+1,y+1);stage.addChild(point);return point}function line(x1,y1,x2,y2,width,color){var line=new PIXI.Graphics;line.lineStyle(width,color);line.moveTo(x1,y1);line.lineTo(x2,y2);stage.addChild(line);return line}function text(x,y,text,style){var text=new PIXI.Text(text,style);text.position.set(x,y);stage.addChild(text);return text}function rectangle(x,y,width,height,color){var g=new PIXI.Graphics;color=color===undefined?0:color;g.beginFill(color);g.drawRect(0,0,width,height);g.endFill();g.position.set(x,y);stage.addChild(g);return g}function triangle(x1,y1,x2,y2,x3,y3,color){return polygon([x1,y1,x2,y2,x3,y3],color)}function polygon(points,color){var g=new PIXI.Graphics;color=color===undefined?0:color;var minX=2e9,minY=2e9;for(var i=0;i<points.length;i+=2){minX=Math.min(minX,points[i]);minY=Math.min(minY,points[i+1])}for(var i=0;i<points.length;i+=2){points[i]-=minX;points[i+1]-=minY}g.beginFill(color);g.drawPolygon(points);g.endFill();g.position.set(minX,minY);stage.addChild(g);return g}function circle(x,y,radius,color){var g=new PIXI.Graphics;color=color===undefined?0:color;g.beginFill(color);g.drawCircle(0,0,radius);g.endFill();g.position.set(x,y);stage.addChild(g);return g}function elipse(x,y,width,height,color){var g=new PIXI.Graphics;color=color===undefined?0:color;g.beginFill(color);g.drawEllipse(0,0,width,height);g.endFill();g.position.set(x,y);stage.addChild(g);return g}var textureCache={};function image(x,y,url){var texture=textureCache[url]?textureCache[url]:PIXI.Texture.fromImage(url);textureCache[url]=texture;var sprite=new PIXI.Sprite(texture);sprite.position.set(x,y);stage.addChild(sprite);return sprite}function onClick(g,fn){g.interactive=true;g.on("click",fn);return g}function move(g,x,y){g.position.set(x,y);return g}function moveBy(g,x,y){return move(g,g.position.x+x,g.position.y+y)}function remove(g){stage.removeChild(g);g.destroy()}function isCollision(g1,g2,offset){var r1=g1.getBounds(),r2=g2.getBounds(),p1=g1.position,p2=g2.position;offset=offset||0;return p2.x+r2.width-p1.x-offset>0&&p1.x+r1.width-p2.x-offset>0&&p2.y+r2.height-p1.y-offset>0&&p1.y+r1.height-p2.y-offset>0}function draggable(g){g.interactive=true;var dragData=null;function onDragStart(e){dragData=e.data}function onDragMove(){if(dragData){var newPosition=dragData.getLocalPosition(stage);g.position.set(newPosition.x,newPosition.y)}}function onDragEnd(){dragData=null}g.on("mousedown",onDragStart).on("touchstart",onDragStart).on("mousemove",onDragMove).on("touchmove",onDragMove).on("mouseup",onDragEnd).on("mouseupoutside",onDragEnd).on("touchend",onDragEnd).on("touchendoutside",onDragEnd);return g}function resume(){gameState=true}function pause(){gameState=false}function onKeyDown(fn){if(!events["onkeydown"]){events["onkeydown"]=[]}events["onkeydown"].push(function(e){fn(e.which)})}function onKeyUp(fn){if(!events["onkeyup"]){events["onkeyup"]=[]}events["onkeyup"].push(function(e){fn(e.which)})}document.onkeydown=function(e){if(!gameState||events["onkeydown"]===undefined){return}for(var i=0;i<events["onkeydown"].length;++i){events["onkeydown"][i](e)}};document.onkeyup=function(e){if(!gameState||events["onkeyup"]===undefined){return}for(var i=0;i<events["onkeyup"].length;++i){events["onkeyup"][i](e)}};